{"version":3,"sources":["webpack:///src/components/wechat/wechat.vue","webpack:///./src/components/wechat/wechat.vue?58cc","webpack:///./src/components/wechat/wechat.vue"],"names":["wechat","data","isSwiper","currentIndex","components","WxSearch","computed","extends_default","Object","vuex_esm","mounted","this","getChatList","console","log","chatList","methods","chat_tap","index","msgid","$router","push","path","query","chat_swipeleft","event","stopPropagation","wechat_wechat","render","_vm","_h","$createElement","_c","_self","staticClass","_v","_l","item","key","class","current","on","tap","$event","swipeleft","staticStyle","width","display","attrs","src","headerUrl","directives","name","rawName","value","chatStatus","isMsgRead","isMsgDis","expression","_s","MsgCount","Msg","Time","font-size","color","type","senduser","text","enter-active-class","leave-active-class","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"+JAmDAA,GACAC,KADA,WAEA,OACAC,UAAA,EACAC,cAAA,IAGAC,YACAC,mBAAA,GAEAC,SAAAC,OACAC,OAAAC,EAAA,EAAAD,EACA,cAGAE,QAfA,WAiBAC,KAAAC,cACAC,QAAAC,IAAAH,KAAAI,WAEAC,QAAAT,OACAC,OAAAC,EAAA,EAAAD,EACA,iBAGAS,SALA,SAKAC,EAAAC,GACAD,GAAA,IAAAP,KAAAT,SACAS,KAAAS,QAAAC,MAAAC,KAAA,aAAAC,OAAAJ,YAEAR,KAAAR,cAAA,EACAQ,KAAAT,UAAA,IAIAsB,eAdA,SAcAN,GACAO,MAAAC,kBAEAf,KAAAT,SAIAS,KAAAR,aAAAe,GAHAP,KAAAT,UAAA,EACAS,KAAAR,aAAAe,OCvFAS,GADiBC,OAFjB,WAA0B,IAAAC,EAAAlB,KAAamB,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAAA,EAAA,OAA2BE,YAAA,cAAwBF,EAAA,aAAAH,EAAAM,GAAA,KAAAH,EAAA,KAAAH,EAAAO,GAAAP,EAAA,kBAAAQ,EAAAnB,GAAiF,OAAAc,EAAA,MAAgBM,IAAApB,IAAUc,EAAA,WAAgBE,YAAA,sBAAAK,OAAyCC,QAAAX,EAAA1B,eAAAe,GAAuCuB,IAAKC,IAAA,SAAAC,GAAuBd,EAAAZ,SAAAC,EAAAmB,EAAAlB,QAAgCyB,UAAA,SAAAD,GAA8Bd,EAAAL,eAAAN,OAA4Bc,EAAA,OAAYE,YAAA,cAAwBF,EAAA,OAAYa,aAAaC,MAAA,OAAAC,QAAA,SAAiCC,OAAQC,IAAAZ,EAAAa,aAAsBrB,EAAAM,GAAA,KAAAH,EAAA,QAAyBmB,aAAaC,KAAA,OAAAC,QAAA,SAAAC,OAAAjB,EAAAkB,WAAAC,YAAAnB,EAAAkB,WAAAE,SAAAC,WAAA,4DAAkKxB,YAAA,eAA2BL,EAAAM,GAAAN,EAAA8B,GAAAtB,EAAAuB,aAAA/B,EAAAM,GAAA,KAAAH,EAAA,QAAyDmB,aAAaC,KAAA,OAAAC,QAAA,SAAAC,OAAAjB,EAAAkB,WAAAC,WAAAnB,EAAAkB,WAAAE,SAAAC,WAAA,2DAAgKxB,YAAA,gCAA0CL,EAAAM,GAAA,KAAAH,EAAA,OAA0BE,YAAA,kBAA4BF,EAAA,KAAUE,YAAA,eAAyBL,EAAAM,GAAAN,EAAA8B,GAAAtB,EAAAwB,IAAA,GAAAC,SAAAjC,EAAAM,GAAA,KAAAH,EAAA,KAAAH,EAAAM,GAAAN,EAAA8B,GAAAtB,EAAAe,SAAAvB,EAAAM,GAAA,KAAAH,EAAA,KAAyGmB,aAAaC,KAAA,OAAAC,QAAA,SAAAC,MAAAjB,EAAAkB,WAAA,SAAAG,WAAA,6BAAoGxB,YAAA,+BAA2CL,EAAAM,GAAA,KAAAH,EAAA,KAAsBa,aAAakB,YAAA,OAAAC,MAAA,aAAsChC,EAAA,QAAamB,aAAaC,KAAA,OAAAC,QAAA,SAAAC,MAAA,UAAAjB,EAAA4B,KAAAP,WAAA,4BAAgG7B,EAAAM,GAAAN,EAAA8B,GAAAtB,EAAAwB,IAAA,GAAAK,UAAA,QAAArC,EAAAM,GAAA,iCAAAN,EAAA8B,GAAAtB,EAAAwB,IAAA,GAAAM,MAAA,oCAAAtC,EAAAM,GAAA,KAAAH,EAAA,WAA6KE,YAAA,eAAyBG,EAAAkB,WAAA,UAAAvB,EAAA,OAAwCE,YAAA,cAAwBL,EAAAM,GAAA,UAAAH,EAAA,OAA6BE,YAAA,cAAwBL,EAAAM,GAAA,UAAAN,EAAAM,GAAA,KAAAH,EAAA,OAAyCE,YAAA,aAAuBL,EAAAM,GAAA,kBAAuB,GAAAN,EAAAM,GAAA,KAAAH,EAAA,cAAoCgB,OAAOI,KAAA,4BAAAgB,qBAAA,uBAAAC,qBAAA,2BAA6HrC,EAAA,wBAEtoEsC,oBCCjB,IAcAC,EAdAC,EAAA,OAcAC,CACAzE,EACA2B,GATA,EAVA,SAAA+C,GACAF,EAAA,SAaA,KAEA,MAUAG,EAAA,QAAAJ,EAAA","file":"static/js/9.2dd874ce9cf9a2b132f3.js","sourcesContent":["<template>\r\n    <div>\r\n        <div class=\"chat-list\">\r\n            <wx-search></wx-search>\r\n            <ul>\r\n                <li v-for=\"(item, index) in chatList\" :key=\"index\">\r\n                    <v-touch class=\"weui-cell chat-info\"\r\n                    :class=\"{'current' : currentIndex === index}\"\r\n                    v-on:tap=\"chat_tap(index, item.msgid)\"\r\n                    v-on:swipeleft=\"chat_swipeleft(index)\">\r\n                        <div class=\"chat-left\">\r\n                            <img :src=\"item.headerUrl\" style=\"width: 50px;display: block\">\r\n                            <!-- 未读/消息未屏蔽 -->\r\n                            <span class=\"weui-badge\" v-show=\"!item.chatStatus.isMsgRead && !item.chatStatus.isMsgDis\">{{item.MsgCount}}</span>\r\n                            <!-- 未读/消息屏蔽 -->\r\n                            <span class=\"weui-badge weui-badge_dot\" v-show=\"!item.chatStatus.isMsgRead && item.chatStatus.isMsgDis\"></span>\r\n                        </div>\r\n                        <div class=\"weui-cell__bd\">\r\n                            <!-- 发送时间 -->\r\n                            <p class=\"time right\">{{item.Msg[0].Time}}</p>\r\n                            <!-- 发送人 -->\r\n                            <p>{{item.name}}</p>\r\n                            <!-- 消息免打扰 铃铛 -->\r\n                            <p class=\"right iconfont icon-msgdis\" v-show=\"item.chatStatus.isMsgDis\"></p>\r\n                            <!-- 消息内容 -->\r\n                            <p style=\"font-size: 13px;color: #888888;\">\r\n                                <!-- 群组 显示发送人名字 -->\r\n                                <span v-show=\"item.type === 'group'\">{{item.Msg[0].senduser}}: </span>\r\n                                {{item.Msg[0].text}}\r\n                            </p>\r\n                        </div>\r\n                    </v-touch>\r\n                    <v-touch class=\"chat-right\">\r\n                        <div class=\"chat-read\" v-if=\"item.chatStatus.isMsgRead\">标记未读</div>\r\n                        <div class=\"chat-read\" v-else>标记已读</div>\r\n                        <div class=\"chat-del\">删除</div>\r\n                    </v-touch>\r\n                </li>\r\n            </ul>\r\n        </div>\r\n        <transition\r\n        name=\"custom-classes-transition\"\r\n        enter-active-class=\"animated fadeInRight\"\r\n        leave-active-class=\"animated fadeOutRight\">\r\n            <router-view></router-view>\r\n        </transition>\r\n    </div>\r\n</template>\r\n<script>\r\nimport {mapState, mapActions} from 'vuex'\r\nimport WxSearch from '../common/search'\r\nexport default {\r\n  data () {\r\n    return {\r\n      isSwiper: false, // 是否左划\r\n      currentIndex: -1 // 处于左划index\r\n    }\r\n  },\r\n  components: {\r\n    WxSearch\r\n  },\r\n  computed: {\r\n    ...mapState([\r\n      'chatList'\r\n    ])\r\n  },\r\n  mounted () {\r\n    // 获取聊天列表\r\n    this.getChatList()\r\n    console.log(this.chatList)\r\n  },\r\n  methods: {\r\n    ...mapActions([\r\n      'getChatList'\r\n    ]),\r\n    // 点击 先判断是否为左划状态\r\n    chat_tap (index, msgid) {\r\n      if (index >= 0 && !this.isSwiper) {\r\n        this.$router.push({path: './dialogue', query: {msgid: msgid}})\r\n      } else {\r\n        this.currentIndex = -1\r\n        this.isSwiper = false // 状态改为非左划\r\n      }\r\n    },\r\n    // 向左滑动\r\n    chat_swipeleft (index) {\r\n      event.stopPropagation()\r\n      // 未处于左划状态\r\n      if (!this.isSwiper) {\r\n        this.isSwiper = true // 状态改为左划\r\n        this.currentIndex = index\r\n      } else {\r\n        this.currentIndex = index\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n<style lang=\"scss\">\r\n.chat-list{\r\n    overflow: auto;\r\n    height: 100%;\r\n    li{\r\n        position: relative;\r\n        .chat-info{\r\n            z-index: 2;\r\n            background-color: #ffffff;\r\n            transition: .2s all linear;\r\n            .chat-left{\r\n                position: relative;\r\n                margin-right: 10px;\r\n                .weui-badge{\r\n                    position: absolute;\r\n                    top: -5px;\r\n                    right: -5px;\r\n                }\r\n                .weui-badge_dot{\r\n                    top: -3px;\r\n                    right: -3px;\r\n                }\r\n            }\r\n            .weui-cell__bd{\r\n                .time{\r\n                    color: #B2B2B2;\r\n                    font-size: 14px;\r\n                }\r\n                .icon-msgdis{\r\n                    color: #b8b8b8;\r\n                    font-size: 14px;\r\n                }\r\n            }\r\n        }\r\n        .current{\r\n            transform: translate3d(-156px, 0, 0);\r\n        }\r\n        .chat-right{\r\n            position: absolute;\r\n            top: 0;\r\n            right: 0;\r\n            height: 100%;\r\n            display: flex;\r\n            div{\r\n                display: flex;\r\n                justify-content: center;\r\n                align-items: center;\r\n                background-color: #c7c7cc;\r\n                color: #ffffff;\r\n                font-size: 18px;\r\n                padding: 0 12px;\r\n            }\r\n            .chat-del{\r\n                background-color: #ff3b30;\r\n            }\r\n        }\r\n    }\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/wechat/wechat.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"chat-list\"},[_c('wx-search'),_vm._v(\" \"),_c('ul',_vm._l((_vm.chatList),function(item,index){return _c('li',{key:index},[_c('v-touch',{staticClass:\"weui-cell chat-info\",class:{'current' : _vm.currentIndex === index},on:{\"tap\":function($event){_vm.chat_tap(index, item.msgid)},\"swipeleft\":function($event){_vm.chat_swipeleft(index)}}},[_c('div',{staticClass:\"chat-left\"},[_c('img',{staticStyle:{\"width\":\"50px\",\"display\":\"block\"},attrs:{\"src\":item.headerUrl}}),_vm._v(\" \"),_c('span',{directives:[{name:\"show\",rawName:\"v-show\",value:(!item.chatStatus.isMsgRead && !item.chatStatus.isMsgDis),expression:\"!item.chatStatus.isMsgRead && !item.chatStatus.isMsgDis\"}],staticClass:\"weui-badge\"},[_vm._v(_vm._s(item.MsgCount))]),_vm._v(\" \"),_c('span',{directives:[{name:\"show\",rawName:\"v-show\",value:(!item.chatStatus.isMsgRead && item.chatStatus.isMsgDis),expression:\"!item.chatStatus.isMsgRead && item.chatStatus.isMsgDis\"}],staticClass:\"weui-badge weui-badge_dot\"})]),_vm._v(\" \"),_c('div',{staticClass:\"weui-cell__bd\"},[_c('p',{staticClass:\"time right\"},[_vm._v(_vm._s(item.Msg[0].Time))]),_vm._v(\" \"),_c('p',[_vm._v(_vm._s(item.name))]),_vm._v(\" \"),_c('p',{directives:[{name:\"show\",rawName:\"v-show\",value:(item.chatStatus.isMsgDis),expression:\"item.chatStatus.isMsgDis\"}],staticClass:\"right iconfont icon-msgdis\"}),_vm._v(\" \"),_c('p',{staticStyle:{\"font-size\":\"13px\",\"color\":\"#888888\"}},[_c('span',{directives:[{name:\"show\",rawName:\"v-show\",value:(item.type === 'group'),expression:\"item.type === 'group'\"}]},[_vm._v(_vm._s(item.Msg[0].senduser)+\": \")]),_vm._v(\"\\n                            \"+_vm._s(item.Msg[0].text)+\"\\n                        \")])])]),_vm._v(\" \"),_c('v-touch',{staticClass:\"chat-right\"},[(item.chatStatus.isMsgRead)?_c('div',{staticClass:\"chat-read\"},[_vm._v(\"标记未读\")]):_c('div',{staticClass:\"chat-read\"},[_vm._v(\"标记已读\")]),_vm._v(\" \"),_c('div',{staticClass:\"chat-del\"},[_vm._v(\"删除\")])])],1)}))],1),_vm._v(\" \"),_c('transition',{attrs:{\"name\":\"custom-classes-transition\",\"enter-active-class\":\"animated fadeInRight\",\"leave-active-class\":\"animated fadeOutRight\"}},[_c('router-view')],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-10296f4a\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/wechat/wechat.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-10296f4a\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./wechat.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./wechat.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./wechat.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-10296f4a\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./wechat.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/wechat/wechat.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}